h1.galleryName Photo Gallery: #{gallery.displayName}
a#prev(href=photo.prev.pageURI) &lt;&lt;previous&nbsp;
a#next(href=photo.next.pageURI) next&gt;&gt;
a(href=config.photos.galleryURI + '?gallery=' + gallery + '&photo=' + photo.next.name, id="photolink")
  img#photo(alt=photo.caption, title=photo.caption, src=photo.fullSizeURI)

h1.caption#caption #{photo.caption}
- each photo in photos
  - jsCaption = photo.caption.replace("'", "\\'").replace('"', "&quot;").trim()
  -  altCaption = photo.caption.replace('"', "&quot;").trim()
  - onClick = "showPhoto('" + photo.fullSizeURI + "', '" + jsCaption + "', '" + photo.name + "');return false"
  a(href=config.photos.galleryURI + '?gallery=' + gallery.dirName + '&photo=' + photo.name , onClick=onClick)
    img.thumbnail(src=config.photos.photoURI + gallery.dirName + '/' + photo.name + config.photos.thumbExtension, alt=altCaption, title=altCaption)
h1 Other Photo Galleries
- each gallery in galleries
  a(href=config.photos.galleryURI + '?gallery=' + gallery.dirName) #{gallery.displayName}
  br
script(type="text/javascript")
  function showPhoto(img, caption, name) {
    $("#photo").attr("src", img);
    $("#photo").attr("alt", caption);
    $("#photo").attr("title", caption);
    $("#caption").text(caption);
    $("#photolink").attr("href", "#{config.photos.galleryURI}");
    window.scrollTo(0, 0);
    return true;
  }
