!!! 5
html(lang="en")
  head
    meta(charset="utf-8")
    if wordpress
        | <title><?php bloginfo("name"); ?> <?php if ( is_single() ) { ?> &raquo; Blog Archive <?php } ?> <?php wp_title(); ?> | Peter Lyons </title>
        | <link rel="stylesheet" href="<?php bloginfo("template_url"); ?>/print.css" type="text/css" media="print" />
        | <link rel="alternate" type="application/rss+xml" title="<?php bloginfo("name"); ?> RSS Feed" href="<?php bloginfo("rss2_url"); ?>" />
        | <link rel="pingback" href="<?php bloginfo("pingback_url"); ?>" />
        | <?php if ( is_singular() ) wp_enqueue_script( "comment-reply" ); ?>
        | <?php wp_head(); ?>
    else
      if title
        title #{title} | Peter Lyons
      else
        title Peter Lyons
    meta(name="keywords", content="peter lyons, pete lyons, web development, node.js, ruby on rails, afronauts, boulder, colorado, turtle dove, startups, music, sax, saxophone, saxophonist, sunny daze, confunktion junction, oberlin, smartears, smart ears, big clock")
    meta(name="author", content="Peter Lyons")
    meta(name="description", content="Pete Lyons, node.js coder for hire")
    //-This seems to make it way too big on mobile
    //-meta(name="viewport", content="width=device-width")
    link(rel="stylesheet", href="/screen.css")
    link(rel="stylesheet", href="/css/overcast/jquery-ui.css")
    script(src="/js/jquery.js")
    script(src="/js/jquery-ui.js")
    each URI in specURIs
      script(src=URI)
    each URI2 in testCSS
      link(rel="stylesheet", href=URI2)
    if specURIs.start
      script
        $(document).ready(function() {
          jasmine.getEnv().addReporter(new jasmine.TrivialReporter());
          //Silence the verbose "waiting" messages
          jasmine.TrivialReporter.prototype.log = function(){};
          jasmine.getEnv().execute();
        });

    link(href="/favicon.ico", type="image/x-icon", rel="icon")
    link(href="/favicon.ico", type="image/x-icon", rel="shortcut icon")
    link(rel="openid.server", href="http://www.livejournal.com/openid/server.bml")
    link(rel="openid.delegate", href="http://focusaurus.livejournal.com/")
    link(href="http://fonts.googleapis.com/css?family=Inconsolata", rel="stylesheet")
    link(href="http://fonts.googleapis.com/css?family=Six+Caps", rel="stylesheet")
    link(href="http://fonts.googleapis.com/css?family=Oldenburg", rel="stylesheet")
  body
    .content
      header
        img(src="/images/peter_lyons_logo_icon.png", alt="Peter Lyons Logo")
        h1
          a(href="/") Peter Lyons
        if !wordpress
          nav
            a(href="/") Home
            a(href="/problog") Blog
            a(href="/practices") Practices
            a(href="/stacks") Stacks
            a(href="/career") Career

      if wordpress
        nav.blog
          | <form method="get" id="searchform" action="/problog/">
          |  <input type="text" size="20" name="s" id="s" value="Search..." onblur="if(this.value=='') this.value='Search...';" onfocus="if(this.value=='Search...') this.value='';">
          |  </form>
          | <a href="<?php echo site_url('feed') ?>">
          | <img src="<?php echo esc_url( includes_url( 'images/rss.png' ) ); ?>" /></a>
      !{body}
      :coffeescript
        $ ->
          $("header nav a").each (index, link) ->
            $link = $(link)
            href = $link.attr "href"
            URI = document.location.pathname
            console.log URI, href, URI.indexOf(href)
            same = URI is href
            parent = URI.indexOf(href) >= 0 and href isnt "/"
            if same or parent
              $link.addClass "current"
            else
              $link.removeClass "current"
    include includes/footer

